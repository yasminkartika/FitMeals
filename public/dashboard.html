<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard</title>
    <!-- Favicon: Hapus jika file tidak ada -->
    <!-- <link rel="icon" href="/img/favicon-32x32.png" sizes="32x32" type="image/png" /> -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <style>
      .bg-right-half {
        background-position: right;
        background-repeat: no-repeat;
        background-size: contain;
      }
      /* Custom select option color for review-rating */
      #review-rating option:checked,
      #review-rating option:focus,
      #review-rating option:hover {
        background: #63a365 !important;
        color: #fff !important;
      }
    </style>
  </head>
  <body>
    <!-- Pesan error autentikasi -->
    <div
      id="auth-error"
      style="display: none"
      class="w-full bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative text-center z-50 mt-20"
    >
      <span id="auth-error-msg"
        >Sesi Anda telah berakhir. Silakan login ulang.</span
      >
      <button
        id="auth-error-login-btn"
        class="ml-4 bg-[#63A365] text-white px-3 py-1 rounded"
      >
        Login Ulang
      </button>
    </div>
    <!-- NAVBAR -->
    <nav
      class="bg-white w-full border-b border-gray-200 fixed top-0 left-0 z-50"
    >
      <div
        class="max-w-screen-xl mx-auto flex flex-wrap items-center justify-between p-4"
      >
        <!-- Logo -->
        <a href="#" class="flex items-center space-x-3">
          <img src="/img/Logo FitMeals.png" class="h-8" alt="Logo" />
        </a>
        <!-- Hamburger (mobile) -->
        <button
          id="navbar-btn"
          class="md:hidden inline-flex items-center p-2 text-gray-500 rounded-lg hover:bg-gray-100 focus:outline-none"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
        <!-- Menu + Button -->
        <div
          id="navbar"
          class="hidden w-full md:flex md:w-auto items-center space-y-4 md:space-y-0 md:space-x-8 mt-4 md:mt-0"
        >
          <ul
            class="flex flex-col md:flex-row md:items-center md:space-x-8 text-sm font-medium"
          >
            <li>
              <a href="#Home" class="text-gray-900 hover:text-[#63A365]"
                >Home</a
              >
            </li>
            <li>
              <a href="#menu" class="text-gray-900 hover:text-[#63A365]"
                >Menu</a
              >
            </li>
            <li>
              <a href="#Paket" class="text-gray-900 hover:text-[#63A365]"
                >Paket Catering</a
              >
            </li>
            <li>
              <a href="#Pesanan" class="text-gray-900 hover:text-[#63A365]"
                >Pesanan</a
              >
            </li>
          </ul>
          <div class="flex items-center space-x-8 ml-4 relative">
            <a href="#" class="text-gray-900 hover:text-[#63A365] text-xl">
              <i class="fa-regular fa-bell"></i>
            </a>
            <!-- User Dropdown -->
            <div class="relative">
              <button
                id="user-dropdown-btn"
                class="text-gray-900 hover:text-[#63A365] text-xl focus:outline-none"
              >
                <i class="fa-regular fa-user"></i>
                <span
                  id="user-name"
                  class="ml-2 text-base font-semibold hidden md:inline"
                ></span>
              </button>
              <div
                id="user-dropdown-menu"
                class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-50 border border-gray-100"
              >
                <a
                  href="profile.html"
                  class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
                >
                  <i class="fa-solid fa-gear mr-2"></i>
                  <span>Pengaturan</span>
                </a>
                <a
                  href="#"
                  class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100"
                >
                  <i class="fa-solid fa-right-from-bracket mr-2"></i>
                  <span>Keluar</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <script>
      const btn = document.getElementById("navbar-btn");
      const menu = document.getElementById("navbar");
      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });

      // User dropdown logic
      const userDropdownBtn = document.getElementById("user-dropdown-btn");
      const userDropdownMenu = document.getElementById("user-dropdown-menu");
      userDropdownBtn.addEventListener("click", function (e) {
        e.stopPropagation();
        userDropdownMenu.classList.toggle("hidden");
      });
      document.addEventListener("click", function (e) {
        if (!userDropdownMenu.classList.contains("hidden")) {
          userDropdownMenu.classList.add("hidden");
        }
      });

      // Integrasi user login
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Dashboard loaded, checking authentication...");

        // Fungsi untuk redirect ke login atau tampilkan pesan error
        function redirectToLogin() {
          console.log("Redirecting to login...");
          localStorage.removeItem("token");
          localStorage.removeItem("user");
          // Tampilkan pesan error dan tombol login ulang
          const errDiv = document.getElementById("auth-error");
          if (errDiv) {
            errDiv.style.display = "block";
            window.scrollTo(0, 0);
            document.getElementById("auth-error-login-btn").onclick =
              function () {
                window.location.href = "login.html";
              };
          } else {
            // fallback: redirect langsung
            window.location.href = "login.html";
          }
        }

        // Fungsi untuk update UI dengan data user
        function updateUserUI(user) {
          console.log("Updating UI with user data:", user);
          const userName = document.getElementById("user-name");
          if (userName) {
            userName.textContent =
              user.namaLengkap || user.username || user.email || "Pengguna";
            userName.classList.remove("hidden");
          }
          // Simpan user ke localStorage
          localStorage.setItem("user", JSON.stringify(user));
        }

        // Cek session / token
        const token = localStorage.getItem("token");
        if (
          !token ||
          token === "undefined" ||
          token === "null" ||
          token.trim() === ""
        ) {
          console.error(
            "❌ Token tidak valid di localStorage, redirecting to login."
          );
          redirectToLogin();
          return;
        }
        console.log("📦 Token yang dikirim:", token); // Log token yang dikirim

        fetch("api/user/me", {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer " + token,
          },
          // credentials: "include",
        })
          .then((res) => {
            if (!res.ok) {
              console.error("❌ Token invalid/expired, redirecting to login.");
              redirectToLogin();
              return null;
            }
            return res.json();
          })
          .then((user) => {
            if (user) {
              console.log("✅ User authenticated:", user);
              updateUserUI(user);

              // Refresh session tiap 5 menit
              setInterval(() => {
                fetch("api/refresh-session", {
                  method: "POST",
                  credentials: "include",
                }).catch((err) => {
                  console.error("Session refresh failed:", err);
                });
              }, 5 * 60 * 1000);
            }
          })
          .catch((error) => {
            console.error("❌ Authentication error:", error);
            redirectToLogin();
          });
      });

      // Logout handler
      document.addEventListener("DOMContentLoaded", function () {
        const logoutLink = document.querySelector(
          "#user-dropdown-menu a:last-child"
        );
        if (logoutLink) {
          logoutLink.addEventListener("click", function (e) {
            e.preventDefault();

            // Clear localStorage
            localStorage.removeItem("token");
            localStorage.removeItem("user");

            // Call logout API
            fetch("api/logout", {
              method: "POST",
              credentials: "include",
            })
              .then(() => {
                window.location.href = "index.html";
              })
              .catch(() => {
                window.location.href = "index.html";
              });
          });
        }
      });
    </script>
    <script type="module">
      import { getUser, logout } from "./js/auth.js";

      const user = getUser(); // Kalau belum login, otomatis redirect

      // Tampilkan nama user di UI
      document.getElementById("user-name").textContent = user.namaLengkap;
    </script>

    <!-- Headline -->
    <section
      id="Home"
      class="pt-24 bg-[#f8f6f2] relative text-gray-600 body-font overflow-hidden"
    >
      <div
        class="container mx-auto flex px-5 py-24 md:flex-row flex-col items-center relative z-10"
      >
        <!-- Konten Kiri -->
        <div
          class="lg:w-1/2 w-full lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center"
        >
          <h1
            class="title-font text-4xl sm:text-5xl mb-6 font-extrabold text-[#63A365] leading-tight"
          >
            Santapan Lezat,<br class="hidden lg:inline-block" />
            Nutrisi Tepat,<br class="hidden lg:inline-block" />
            Hidup Sehat<br class="hidden lg:inline-block" />
            <span>Bareng FitMeals!</span>
          </h1>
          <p class="mb-8 leading-relaxed text-gray-700 text-lg max-w-xl">
            Nikmati hidup lebih sehat tanpa stres! Dengan catering sehat kami,
            Anda bisa tetap menikmati makanan lezat sambil menjaga berat badan,
            meningkatkan energi, dan merasa lebih bugar setiap hari.
          </p>
        </div>
      </div>
      <!-- Gambar Background Kanan (besar & agak kiri) -->
      <div class="hidden md:block absolute top-0 right-[-5%] w-[65%] h-full">
        <img
          src="./img/filmeals_hd.png"
          alt="FitMeals"
          class="w-full h-full object-cover"
        />
      </div>
    </section>

    <!-- Menu -->
    <section id="menu" class="pt-18 text-gray-600 body-font bg-[#FFFFFF]">
      <div class="container px-8 sm:px-12 lg:px-20 mx-auto py-8">
        <div class="flex flex-col text-center w-full mb-8">
          <h1 class="text-base text-gray-700">FitMeals Menu</h1>
          <p
            id="week-title"
            class="text-3xl md:text-4xl font-bold text-green-700 text-center mb-2"
          >
            Menu Minggu
          </p>
          <p id="week-dates" class="text-[#63a365] font-medium mb-2">
            (13 - 19 April 2025)
          </p>
          <p id="week-ket" class="text-base text-gray-700">
            *Ketuk gambar untuk melihat detail menu
          </p>
        </div>

        <!-- Grid gambar -->
        <div
          class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4"
          id="menu-cards"
        >
          <!-- JS akan render card di sini -->
        </div>
      </div>
    </section>

    <!-- Paket Catering -->
    <section id="Paket" class="bg-[#f8f6f2]">
      <div class="max-w-5xl mx-auto py-10 px-4 pt-18">
        <h2
          class="text-3xl md:text-4xl font-bold text-green-700 text-center mb-2"
        >
          Paket Catering
        </h2>
        <p class="text-center text-lg text-gray-700 mb-8">
          Pilih paket harian, mingguan, atau bulanan yang sehat, praktis,<br />
          dan hemat setiap hari.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Paket Harian -->
          <div
            class="bg-white rounded-xl shadow p-5 flex flex-col items-center"
          >
            <img
              src="img/sarapan.jpg"
              alt="Paket Harian"
              class="rounded-lg w-full h-40 object-cover mb-4"
            />
            <h3 class="text-xl font-bold text-[#63a365] mb-2 text-center">
              Paket Harian
            </h3>
            <p class="text-gray-700 mb-2 text-sm">
              Kamu akan mendapatkan 3 kali makan lengkap (sarapan, makan siang,
              dan makan malam) dengan menu bergizi seimbang, praktis, dan lezat
              <span id="more-harian" class="hidden">
                <br />✨ Fasilitas Paket <br />✅ Sarapan sehat & mengenyangkan
                <br />✅ Makan siang bergizi <br />✅ Makan malam praktis &
                nikmat <br />✅ Menu bervariasi setiap hari
              </span>
              <button
                id="toggle-harian"
                class="text-green-500 hover:text-green-600 underline font-semibold ml-1 focus:outline-none"
                type="button"
              >
                selengkapnya
              </button>
            </p>
            <p class="text-[#63a365] font-bold mb-4">Rp. 75.000</p>
            <button
              class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg transition pesan-sekarang"
              data-paket="Paket Harian"
              data-harga="75000"
            >
              Pesan Sekarang
            </button>
          </div>
          <!-- Paket Mingguan -->
          <div
            class="bg-white rounded-xl shadow p-5 flex flex-col items-center"
          >
            <img
              src="img/lunch.jpg"
              alt="Paket Mingguan"
              class="rounded-lg w-full h-40 object-cover mb-4"
            />
            <h3 class="text-xl font-bold text-[#63a365] mb-2 text-center">
              Paket Mingguan
            </h3>
            <p class="text-gray-700 mb-2 text-sm">
              Kamu akan mendapatkan 3 kali makan lengkap setiap hari selama
              Senin sampai Sabtu, dengan menu berganti setiap hari agar nggak
              bosan.
              <span id="more-mingguan" class="hidden">
                <br />✨ Fasilitas Paket <br />✅ Sarapan sehat <br />✅ Makan
                siang bergizi <br />✅ Makan malam nikmat & praktis <br />✅
                Menu berbeda setiap hari <br />✅ Total 18 kali makan selama 6
                hari
              </span>
              <button
                id="toggle-mingguan"
                class="text-green-500 hover:text-green-600 underline font-semibold ml-1 focus:outline-none"
                type="button"
              >
                selengkapnya
              </button>
            </p>
            <p class="text-[#63a365] font-bold mb-4">Rp. 450.000/minggu~</p>
            <button
              class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg transition pesan-sekarang"
              data-paket="Paket Mingguan"
              data-harga="450000"
            >
              Pesan Sekarang
            </button>
          </div>
          <!-- Paket Bulanan -->
          <div
            class="bg-white rounded-xl shadow p-5 flex flex-col items-center"
          >
            <img
              src="img/dinner.png"
              alt="Paket Bulanan"
              class="rounded-lg w-full h-40 object-cover mb-4"
            />
            <h3 class="text-xl font-bold text-[#63a365] mb-2 text-center">
              Paket Bulanan
            </h3>
            <p class="text-gray-700 mb-2 text-sm">
              Kamu akan mendapatkan 3 kali makan lengkap setiap hari selama 24
              hari aktif.<br />
              <span class="text-green-600">✨ Fasilitas Paket</span>
              <span id="more-bulanan" class="hidden">
                <br />✅ Sarapan, makan siang, makan malam selama 24 hari aktif
                <br />✅ Total 72 kali makan sehat sebulan <br />✅ Menu selalu
                bervariasi setiap harinya <br />✅ Lebih hemat dibanding beli
                harian <br />✅ Badan lebih sehat, waktu lebih efisien
              </span>
              <br />
              <button
                id="toggle-bulanan"
                class="text-green-500 hover:text-green-600 underline font-semibold ml-1 focus:outline-none"
                type="button"
              >
                selengkapnya
              </button>
            </p>
            <p class="text-[#63a365] font-bold mb-4">Rp. 1.800.000/bulan~</p>
            <button
              class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg transition pesan-sekarang"
              data-paket="Paket Bulanan"
              data-harga="1800000"
            >
              Pesan Sekarang
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Pesanan -->
    <section id="Pesanan" class="bg-[#FFFFFF] min-h-screen">
      <div class="max-w-6xl mx-auto py-8 pt-18">
        <h1 class="text-4xl font-bold mb-10 text-center">Pesanan</h1>
        <div id="orders-list" class="space-y-6 px-2 sm:px-4">
          <!-- Pesanan akan dirender di sini oleh JS -->
        </div>
      </div>

      <!-- Modal Ulasan -->
      <div
        id="review-modal"
        class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden"
      >
        <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md">
          <h2 class="text-lg font-semibold mb-4">Beri Ulasan</h2>
          <form id="review-form">
            <input type="hidden" id="review-order-id" />
            <div class="mb-3">
              <label class="block mb-1 font-medium">Nilai:</label>
              <div class="relative" id="custom-select-wrapper">
                <button
                  type="button"
                  id="custom-select-btn"
                  class="w-full border rounded px-2 py-1 flex justify-between items-center bg-white focus:outline-none"
                >
                  <span id="custom-select-value" class="text-gray-700"
                    >Pilih Nilai</span
                  >
                  <svg
                    class="w-4 h-4 ml-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 9l-7 7-7-7"
                    />
                  </svg>
                </button>
                <ul
                  id="custom-select-list"
                  class="absolute left-0 right-0 bg-white text-gray-800 rounded shadow-lg mt-1 z-20 hidden"
                >
                  <li
                    data-value=""
                    class="px-4 py-2 cursor-pointer hover:bg-[#63a365] hover:text-white"
                  >
                    Pilih Nilai
                  </li>
                  <li
                    data-value="5"
                    class="px-4 py-2 cursor-pointer hover:bg-[#63a365] hover:text-white"
                  >
                    5 - Sangat Puas
                  </li>
                  <li
                    data-value="4"
                    class="px-4 py-2 cursor-pointer hover:bg-[#63a365] hover:text-white"
                  >
                    4 - Puas
                  </li>
                  <li
                    data-value="3"
                    class="px-4 py-2 cursor-pointer hover:bg-[#63a365] hover:text-white"
                  >
                    3 - Cukup
                  </li>
                  <li
                    data-value="2"
                    class="px-4 py-2 cursor-pointer hover:bg-[#63a365] hover:text-white"
                  >
                    2 - Kurang
                  </li>
                  <li
                    data-value="1"
                    class="px-4 py-2 cursor-pointer hover:bg-[#63a365] hover:text-white"
                  >
                    1 - Sangat Buruk
                  </li>
                </ul>
                <input type="hidden" id="review-rating" value="" />
              </div>
            </div>
            <div class="mb-3">
              <label class="block mb-1 font-medium">Ulasan:</label>
              <textarea
                id="review-text"
                class="w-full border rounded px-2 py-1"
                rows="3"
                placeholder="Tulis ulasan Anda..."
              ></textarea>
            </div>
            <div class="flex justify-end gap-2">
              <button
                type="button"
                id="close-modal"
                class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400"
              >
                Batal
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-[#63a365] text-white rounded hover:bg-[#57925B]"
              >
                Kirim
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal Detail Pesanan -->
      <div
        id="order-detail-modal"
        class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden"
      >
        <div
          class="bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto"
        >
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold">Detail Pesanan</h2>
            <button
              id="close-order-detail-modal"
              class="text-gray-500 hover:text-gray-700 text-2xl"
            >
              &times;
            </button>
          </div>

          <div id="order-detail-content">
            <!-- Content will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </section>

    <script>
      // Paket Harian
      const btnHarian = document.getElementById("toggle-harian");
      const moreHarian = document.getElementById("more-harian");
      let openHarian = false;
      btnHarian.onclick = function () {
        openHarian = !openHarian;
        if (openHarian) {
          moreHarian.classList.remove("hidden");
          btnHarian.textContent = "lebih singkat";
        } else {
          moreHarian.classList.add("hidden");
          btnHarian.textContent = "selengkapnya";
        }
      };
      // Paket Mingguan
      const btnMingguan = document.getElementById("toggle-mingguan");
      const moreMingguan = document.getElementById("more-mingguan");
      let openMingguan = false;
      btnMingguan.onclick = function () {
        openMingguan = !openMingguan;
        if (openMingguan) {
          moreMingguan.classList.remove("hidden");
          btnMingguan.textContent = "lebih singkat";
        } else {
          moreMingguan.classList.add("hidden");
          btnMingguan.textContent = "selengkapnya";
        }
      };
      // Paket Bulanan
      const btnBulanan = document.getElementById("toggle-bulanan");
      const moreBulanan = document.getElementById("more-bulanan");
      let openBulanan = false;
      btnBulanan.onclick = function () {
        openBulanan = !openBulanan;
        if (openBulanan) {
          moreBulanan.classList.remove("hidden");
          btnBulanan.textContent = "lebih singkat";
        } else {
          moreBulanan.classList.add("hidden");
          btnBulanan.textContent = "selengkapnya";
        }
      };

      // Data pesanan dari database
      let orders = [];

      // Cek localStorage untuk review yang sudah dikirim
      function getLocalReviews() {
        return JSON.parse(localStorage.getItem("orderReviews") || "{}");
      }

      function setLocalReview(orderId, rating, review) {
        const reviews = getLocalReviews();
        reviews[orderId] = { rating, review };
        localStorage.setItem("orderReviews", JSON.stringify(reviews));
      }

      // Fungsi untuk mengambil pesanan dari database
      async function fetchUserOrders() {
        try {
          const token = localStorage.getItem("token");
          const response = await fetch("api/orders/user", {
            method: "GET",
            headers: {
              "Content-Type": "application/json",
              Authorization: "Bearer " + token,
            },
          });

          if (!response.ok) {
            throw new Error("Failed to fetch orders");
          }

          const data = await response.json();
          if (data.success) {
            orders = data.orders;
            renderOrders();
          }
        } catch (error) {
          console.error("Error fetching orders:", error);
          // Fallback ke dummy data jika gagal
          orders = [
            {
              _id: 1,
              packages: [{ name: "Paket Mingguan" }],
              orderDate: "2025-06-01",
              status: "Selesai",
              delivery: { tanggal_mulai: "2025-06-01" },
            },
          ];
          renderOrders();
        }
      }

      function renderOrders() {
        const reviews = getLocalReviews();
        const list = document.getElementById("orders-list");
        list.innerHTML = "";

        if (orders.length === 0) {
          list.innerHTML = `
            <div class="text-center py-8 text-gray-500">
              <i class="fas fa-shopping-bag text-4xl mb-4"></i>
              <p>Belum ada pesanan</p>
              <a href="#Paket" class="mt-4 inline-block bg-[#63A365] text-white px-4 py-2 rounded-lg">
                Pesan Sekarang
              </a>
            </div>
          `;
          return;
        }

        orders.forEach((order) => {
          let reviewed = false;
          let rating = 0;
          let review = "";

          if (reviews[order._id]) {
            reviewed = true;
            rating = reviews[order._id].rating;
            review = reviews[order._id].review;
          }

          const orderDate = new Date(order.orderDate).toLocaleDateString(
            "id-ID"
          );
          const packageNames = order.packages.map((pkg) => pkg.name).join(", ");

          const card = document.createElement("div");
          card.className =
            "rounded-lg shadow p-4 flex flex-col md:flex-row md:items-center justify-between mx-auto my-0 w-full cursor-pointer hover:shadow-lg transition-shadow";
          card.style.boxSizing = "border-box";
          card.style.maxWidth = "800px";
          card.style.marginBottom = "1.5rem";
          card.style.width = "100%";
          card.style.backgroundColor = "#63A365";
          card.style.color = "white";
          card.onclick = () => openOrderDetailModal(order);
          card.innerHTML = `
          <div class="flex items-center gap-4">
            <img src="img/lunch.jpg" alt="${packageNames}" class="w-20 h-20 object-cover rounded-lg">
            <div>
              <div class="font-semibold text-lg">${packageNames}</div>
              <div class="text-sm text-gray-300">Tanggal: ${orderDate}</div>
              <div class="text-sm text-gray-300">Total: Rp ${
                order.totalAmount?.toLocaleString() || "0"
              }</div>
              <div class="text-sm mt-1">Status: <span class="font-semibold ${
                order.status === "Selesai"
                  ? "text-yellow-300"
                  : order.status === "Dibatalkan"
                  ? "text-red-700"
                  : "text-blue-800"
              }">${order.status}</span></div>
            </div>
          </div>
          <div class="mt-3 md:mt-0 flex flex-col items-end gap-2">
            <div class="text-sm text-gray-300">Klik untuk detail</div>
            ${
              order.status === "Pending Payment"
                ? `<button class="bg-red-500 text-white px-4 py-1 rounded hover:bg-red-600 font-semibold" onclick="event.stopPropagation(); cancelOrder('${order._id}')">Batalkan</button>`
                : ""
            }
            ${
              order.status === "Selesai" && !reviewed
                ? `<button class="bg-yellow-400 text-white px-4 py-1 rounded hover:bg-yellow-500 font-semibold" onclick="event.stopPropagation(); openReviewModal('${order._id}')">Beri Ulasan</button>`
                : ""
            }
            ${
              order.status === "Selesai" && reviewed
                ? `<div class="text-sm text-white">Nilai: <span class="font-bold">${rating}⭐</span><br>"${review}"</div>`
                : ""
            }
          </div>
        `;
          list.appendChild(card);
        });
      }

      // Modal logic
      function openReviewModal(orderId) {
        document.getElementById("review-modal").classList.remove("hidden");
        document.getElementById("review-order-id").value = orderId;
        document.getElementById("review-rating").value = "";
        document.getElementById("custom-select-value").textContent =
          "Pilih Nilai";
        document.getElementById("review-text").value = "";
      }
      window.openReviewModal = openReviewModal;

      document.getElementById("close-modal").onclick = function () {
        document.getElementById("review-modal").classList.add("hidden");
      };

      // Order Detail Modal logic
      function openOrderDetailModal(order) {
        const modal = document.getElementById("order-detail-modal");
        const content = document.getElementById("order-detail-content");

        const orderDate = new Date(order.orderDate).toLocaleDateString(
          "id-ID",
          {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
          }
        );

        const packageNames = order.packages.map((pkg) => pkg.name).join(", ");
        const totalAmount = order.totalAmount?.toLocaleString() || "0";

        let statusColor = "";
        let statusText = order.status;

        switch (order.status) {
          case "Pending Payment":
            statusColor = "text-orange-600 bg-orange-100";
            statusText = "Menunggu Pembayaran";
            break;
          case "Paid":
            statusColor = "text-blue-600 bg-blue-100";
            statusText = "Sudah Dibayar";
            break;
          case "Processing":
            statusColor = "text-yellow-600 bg-yellow-100";
            statusText = "Sedang Diproses";
            break;
          case "Selesai":
            statusColor = "text-green-600 bg-green-100";
            statusText = "Selesai";
            break;
          case "Dibatalkan":
            statusColor = "text-red-600 bg-red-100";
            statusText = "Dibatalkan";
            break;
          default:
            statusColor = "text-gray-600 bg-gray-100";
        }

        content.innerHTML = `
          <div class="space-y-6">
            <!-- Order Info -->
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="font-semibold text-lg mb-3 text-gray-800">Informasi Pesanan</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p class="text-sm text-gray-600">ID Pesanan</p>
                  <p class="font-medium">${order._id}</p>
                </div>
                <div>
                  <p class="text-sm text-gray-600">Tanggal Pesanan</p>
                  <p class="font-medium">${orderDate}</p>
                </div>
                <div>
                  <p class="text-sm text-gray-600">Paket</p>
                  <p class="font-medium">${packageNames}</p>
                </div>
                <div>
                  <p class="text-sm text-gray-600">Total Pembayaran</p>
                  <p class="font-bold text-lg text-[#63A365]">Rp ${totalAmount}</p>
                </div>
                <div class="md:col-span-2">
                  <p class="text-sm text-gray-600">Status</p>
                  <span class="inline-block px-3 py-1 rounded-full text-sm font-medium ${statusColor}">${statusText}</span>
                </div>
              </div>
            </div>

            <!-- Delivery Info -->
            ${
              order.delivery
                ? `
            <div class="bg-gray-50 p-4 rounded-lg">
              <h3 class="font-semibold text-lg mb-3 text-gray-800">Informasi Pengiriman</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                ${
                  order.delivery.tanggal_mulai
                    ? `
                <div>
                  <p class="text-sm text-gray-600">Tanggal Mulai</p>
                  <p class="font-medium">${new Date(
                    order.delivery.tanggal_mulai
                  ).toLocaleDateString("id-ID")}</p>
                </div>
                `
                    : ""
                }
                ${
                  order.delivery.alamat
                    ? `
                <div>
                  <p class="text-sm text-gray-600">Alamat Pengiriman</p>
                  <p class="font-medium">${order.delivery.alamat}</p>
                </div>
                `
                    : ""
                }
                ${
                  order.delivery.catatan
                    ? `
                <div class="md:col-span-2">
                  <p class="text-sm text-gray-600">Catatan</p>
                  <p class="font-medium">${order.delivery.catatan}</p>
                </div>
                `
                    : ""
                }
              </div>
            </div>
            `
                : ""
            }

            <!-- Payment Info -->
            ${
              order.status === "Pending Payment"
                ? `
            <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
              <h3 class="font-semibold text-lg mb-3 text-orange-800">Informasi Pembayaran</h3>
              <div class="space-y-3">
                <div>
                  <p class="text-sm text-orange-700">Rekening Tujuan</p>
                  <p class="font-medium text-orange-800">Bank BCA - 1234567890</p>
                  <p class="text-sm text-orange-600">a.n. FitMeals Indonesia</p>
                </div>
                <div>
                  <p class="text-sm text-orange-700">Jumlah Transfer</p>
                  <p class="font-bold text-lg text-orange-800">Rp ${totalAmount}</p>
                </div>
                <div class="text-sm text-orange-700">
                  <p class="font-medium mb-2">Instruksi Pembayaran:</p>
                  <ul class="list-disc list-inside space-y-1">
                    <li>Transfer ke rekening di atas</li>
                    <li>Simpan bukti transfer</li>
                    <li>Konfirmasi pembayaran di bawah ini</li>
                    <li>Pesanan dapat dibatalkan dalam 24 jam</li>
                  </ul>
                </div>
              </div>
            </div>
            `
                : ""
            }

            <!-- Action Buttons -->
            <div class="flex flex-wrap gap-3">
              ${
                order.status === "Pending Payment"
                  ? `
                <button onclick="confirmPayment('${order._id}')" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 font-medium">
                  <i class="fas fa-check mr-2"></i>Konfirmasi Pembayaran
                </button>
                <button onclick="cancelOrder('${order._id}')" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 font-medium">
                  <i class="fas fa-times mr-2"></i>Batalkan Pesanan
                </button>
              `
                  : ""
              }
              
              ${
                order.status === "Selesai"
                  ? `
                <a href="invoice.html?id=${
                  order._id
                }" target="_blank" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium inline-flex items-center">
                  <i class="fas fa-file-invoice mr-2"></i>Lihat Invoice
                </a>
                ${
                  !getLocalReviews()[order._id]
                    ? `
                <button onclick="openReviewModal('${order._id}')" class="bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 font-medium">
                  <i class="fas fa-star mr-2"></i>Beri Ulasan
                </button>
                `
                    : ""
                }
              `
                  : ""
              }
              
              <button onclick="closeOrderDetailModal()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 font-medium">
                <i class="fas fa-times mr-2"></i>Tutup
              </button>
            </div>
          </div>
        `;

        modal.classList.remove("hidden");
      }
      window.openOrderDetailModal = openOrderDetailModal;

      function closeOrderDetailModal() {
        document.getElementById("order-detail-modal").classList.add("hidden");
      }
      window.closeOrderDetailModal = closeOrderDetailModal;

      document.getElementById("close-order-detail-modal").onclick =
        function () {
          closeOrderDetailModal();
        };

      document.getElementById("review-form").onsubmit = function (e) {
        e.preventDefault();
        const orderId = document.getElementById("review-order-id").value;
        const rating = document.getElementById("review-rating").value;
        const review = document.getElementById("review-text").value.trim();
        if (!rating || !review) {
          alert("Mohon isi rating dan ulasan.");
          return;
        }

        // Cari order untuk mendapatkan nama paket
        const order = orders.find((o) => o._id === orderId);
        const packageName = order ? order.packages[0].name : "Paket Catering";

        // Kirim review ke database
        const token = localStorage.getItem("token");
        fetch("api/reviews/create", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer " + token,
          },
          body: JSON.stringify({
            orderId: orderId,
            rating: parseInt(rating),
            review: review,
            packageName: packageName,
          }),
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              // Simpan juga ke localStorage untuk UI
              setLocalReview(orderId, rating, review);
              document.getElementById("review-modal").classList.add("hidden");
              renderOrders();
              alert("Ulasan berhasil dikirim!");
            } else {
              alert("Gagal mengirim ulasan: " + data.message);
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("Terjadi kesalahan saat mengirim ulasan");
          });
      };

      // Custom select logic for review-rating
      const customSelectBtn = document.getElementById("custom-select-btn");
      const customSelectList = document.getElementById("custom-select-list");
      const customSelectValue = document.getElementById("custom-select-value");
      const reviewRatingInput = document.getElementById("review-rating");

      customSelectBtn.addEventListener("click", function (e) {
        e.stopPropagation();
        customSelectList.classList.toggle("hidden");
      });

      customSelectList.querySelectorAll("li").forEach(function (item) {
        item.addEventListener("click", function (e) {
          const value = this.getAttribute("data-value");
          customSelectValue.textContent = this.textContent;
          reviewRatingInput.value = value;
          customSelectList.classList.add("hidden");
        });
      });

      document.addEventListener("click", function (e) {
        customSelectList.classList.add("hidden");
      });

      // Fungsi untuk cancel order
      async function cancelOrder(orderId) {
        console.log("🚀 Attempting to cancel order:", orderId);

        const confirmCancel = confirm(
          "Apakah Anda yakin ingin membatalkan pesanan ini? Tindakan ini tidak dapat dibatalkan."
        );

        if (!confirmCancel) {
          console.log("❌ User cancelled the confirmation");
          return;
        }

        try {
          const token = localStorage.getItem("token");
          console.log("🔑 Token:", token ? "Found" : "Not found");

          if (!token) {
            alert("Token tidak ditemukan. Silakan login ulang.");
            return;
          }

          console.log(
            "📡 Sending cancel request to:",
            `api/orders/${orderId}/cancel`
          );

          const response = await fetch(`api/orders/${orderId}/cancel`, {
            method: "PUT",
            headers: {
              "Content-Type": "application/json",
              Authorization: "Bearer " + token,
            },
          });

          console.log("📥 Response status:", response.status);

          const data = await response.json();
          console.log("📄 Response data:", data);

          if (data.success) {
            alert("Pesanan berhasil dibatalkan!");
            // Refresh orders list
            fetchUserOrders();
            closeOrderDetailModal();
          } else {
            alert("Gagal membatalkan pesanan: " + data.message);
          }
        } catch (error) {
          console.error("❌ Error cancelling order:", error);
          alert("Terjadi kesalahan saat membatalkan pesanan: " + error.message);
        }
      }
      window.cancelOrder = cancelOrder;

      // Fungsi untuk konfirmasi pembayaran
      async function confirmPayment(orderId) {
        console.log("💰 Attempting to confirm payment for order:", orderId);

        const confirmPayment = confirm(
          "Apakah Anda sudah melakukan transfer pembayaran? Pastikan Anda telah menyimpan bukti transfer."
        );

        if (!confirmPayment) {
          console.log("❌ User cancelled payment confirmation");
          return;
        }

        try {
          const token = localStorage.getItem("token");
          console.log("🔑 Token:", token ? "Found" : "Not found");

          if (!token) {
            alert("Token tidak ditemukan. Silakan login ulang.");
            return;
          }

          console.log(
            "📡 Sending payment confirmation to:",
            `api/orders/${orderId}/confirm-payment`
          );

          const response = await fetch(
            `api/orders/${orderId}/confirm-payment`,
            {
              method: "PUT",
              headers: {
                "Content-Type": "application/json",
                Authorization: "Bearer " + token,
              },
            }
          );

          console.log("📥 Response status:", response.status);

          const data = await response.json();
          console.log("📄 Response data:", data);

          if (data.success) {
            alert(
              "Konfirmasi pembayaran berhasil! Tim kami akan memverifikasi pembayaran Anda."
            );
            // Refresh orders list
            fetchUserOrders();
            closeOrderDetailModal();
          } else {
            alert("Gagal mengkonfirmasi pembayaran: " + data.message);
          }
        } catch (error) {
          console.error("❌ Error confirming payment:", error);
          alert(
            "Terjadi kesalahan saat mengkonfirmasi pembayaran: " + error.message
          );
        }
      }
      window.confirmPayment = confirmPayment;

      // Inisialisasi
      fetchUserOrders();

      // Handle klik tombol Pesan Sekarang
      document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".pesan-sekarang").forEach(function (btn) {
          btn.addEventListener("click", function () {
            // Ambil data paket
            const paket = btn.getAttribute("data-paket");
            const harga = btn.getAttribute("data-harga");

            // Simpan ke localStorage
            localStorage.setItem(
              "paketCheckout",
              JSON.stringify({
                paket: paket,
                harga: harga,
                timestamp: new Date().toISOString(),
              })
            );

            // Redirect ke checkout.html
            window.location.href = "checkout.html";
          });
        });
      });

      // Jalankan ketika halaman sudah dimuat
      // window.addEventListener("DOMContentLoaded", function () {
      //   fetch("/dashboard", {
      //     method: "GET",
      //     credentials: "include"
      //   })
      //     .then(res => {
      //       if (!res.ok) throw new Error("Gagal mengambil data dashboard");
      //       return res.json();
      //     })
      //     .then(data => {
      //       console.log("DASHBOARD DATA:", data);
      //     })
      //     .catch(err => {
      //       console.error("Error saat ambil data dashboard:", err);
      //     });
      // });
    </script>

    <!-- Script untuk memuat menu dari database -->
    <script>
      // Data menu dari database
      let menuData = [];

      // Fungsi untuk mengambil menu dari database
      async function fetchMenuData() {
        try {
          const response = await fetch("api/menu");

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const data = await response.json();

          if (data.menus && data.menus.length > 0) {
            // Render menu langsung dari data API
            renderMenu(data.menus);
          } else {
            // Tampilkan pesan jika tidak ada menu
            showNoMenuMessage();
          }
        } catch (error) {
          console.error("Error fetching menu data:", error);
          showNoMenuMessage();
        }
      }

      // Fungsi untuk mendapatkan tanggal minggu saat ini
      function getCurrentWeekDates() {
        const now = new Date();
        const currentYear = now.getFullYear();
        const startOfYear = new Date(currentYear, 0, 1);
        const days = Math.floor((now - startOfYear) / (24 * 60 * 60 * 1000));
        const currentWeek = Math.ceil((days + startOfYear.getDay() + 1) / 7);

        const startDate = new Date(currentYear, 0, 1 + (currentWeek - 1) * 7);
        const endDate = new Date(startDate);
        endDate.setDate(startDate.getDate() + 6);

        return `${startDate.getDate()} ${startDate.toLocaleDateString("id-ID", {
          month: "short",
        })} - ${endDate.getDate()} ${endDate.toLocaleDateString("id-ID", {
          month: "short",
        })} ${currentYear}`;
      }

      // Fungsi untuk render menu
      function renderMenu(menus) {
        const weekTitle = document.getElementById("week-title");
        const weekDates = document.getElementById("week-dates");
        const container = document.getElementById("menu-cards");

        if (!weekTitle || !weekDates || !container) {
          console.error("Required elements not found");
          return;
        }

        // Update judul dan tanggal
        weekTitle.textContent = "Menu Minggu Ini";
        weekDates.textContent = `(${getCurrentWeekDates()})`;
        container.innerHTML = "";

        // Render setiap menu
        menus.forEach((menu, idx) => {
          const card = document.createElement("div");
          card.className = "relative cursor-pointer group";

          card.innerHTML = `
            <img src="${
              menu.gambar
            }" class="object-cover w-full aspect-[4/3] max-w-md min-h-40 rounded-xl shadow-lg mb-4 transition-transform group-hover:scale-105 mx-auto" onclick="toggleInfo(${idx})">
            <div id="info-${idx}" class="hidden bg-white p-3 rounded-lg mt-2 shadow">
              <h2 class="text-sm font-semibold text-[#63A365] uppercase">${
                menu.nama
              }</h2>
              <p class="text-gray-900 font-medium mb-1">${menu.deskripsi}</p>
              <p class="text-[#63A365] font-semibold mt-1">${
                menu.nutrisi?.kalori || 0
              } KKAL</p>
              <p class="text-gray-900 font-medium">Fat: ${
                menu.nutrisi?.lemak || 0
              }g, Protein: ${menu.nutrisi?.protein || 0}g, Karbohidrat: ${
            menu.nutrisi?.karbohidrat || 0
          }g</p>
              ${
                menu.harga
                  ? `<p class="text-[#63A365] font-bold mt-2">Rp ${menu.harga.toLocaleString()}</p>`
                  : ""
              }
            </div>
          `;
          container.appendChild(card);
        });
      }

      // Fungsi untuk menampilkan pesan jika tidak ada menu
      function showNoMenuMessage() {
        const weekTitle = document.getElementById("week-title");
        const weekDates = document.getElementById("week-dates");
        const container = document.getElementById("menu-cards");

        if (weekTitle) weekTitle.textContent = "Menu Minggu Ini";
        if (weekDates) weekDates.textContent = `(${getCurrentWeekDates()})`;
        if (container) {
          container.innerHTML = `
            <div class="text-center py-8 text-gray-500">
              <i class="fas fa-utensils text-4xl mb-4"></i>
              <p class="text-lg font-medium">Belum ada menu untuk minggu ini</p>
              <p class="text-sm">Silakan cek kembali nanti</p>
            </div>
          `;
        }
      }

      // Fungsi untuk toggle info
      function toggleInfo(index) {
        const info = document.getElementById(`info-${index}`);
        if (info) {
          info.classList.toggle("hidden");
        }
      }

      // Load menu when page loads
      document.addEventListener("DOMContentLoaded", function () {
        fetchMenuData();
      });

      // Make functions global
      window.toggleInfo = toggleInfo;
    </script>

    <!-- Overlay WhatsApp Button -->
    <a
      href="https://wa.me/6281234567890"
      target="_blank"
      aria-label="Konsultasi di WhatsApp"
      class="fixed z-50 bottom-6 right-6 flex items-center px-5 py-2 rounded-full bg-green-600 shadow-lg hover:bg-green-700 transition-colors duration-200 cursor-pointer group"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="white"
        viewBox="0 0 24 24"
        width="24"
        height="24"
        class="mr-2"
      >
        <path
          d="M20.52 3.48A12.07 12.07 0 0 0 12 0C5.37 0 0 5.37 0 12c0 2.11.55 4.16 1.6 5.97L0 24l6.19-1.62A11.93 11.93 0 0 0 12 24c6.63 0 12-5.37 12-12 0-3.19-1.24-6.19-3.48-8.52zM12 22c-1.77 0-3.5-.46-5.01-1.33l-.36-.21-3.68.96.98-3.59-.23-.37A9.94 9.94 0 0 1 2 12c0-5.52 4.48-10 10-10s10 4.48 10 10-4.48 10-10 10zm5.2-7.8c-.28-.14-1.65-.81-1.9-.9-.25-.09-.43-.14-.61.14-.18.28-.7.9-.86 1.08-.16.18-.32.2-.6.07-.28-.14-1.18-.44-2.25-1.41-.83-.74-1.39-1.65-1.55-1.93-.16-.28-.02-.43.12-.57.13-.13.28-.34.42-.51.14-.17.18-.29.28-.48.09-.19.05-.36-.02-.5-.07-.14-.61-1.47-.84-2.01-.22-.53-.45-.46-.61-.47-.16-.01-.35-.01-.54-.01-.19 0-.5.07-.76.34-.26.27-1 1-.99 2.43.01 1.43 1.02 2.81 1.16 3 .14.19 2.01 3.07 4.88 4.19.68.29 1.21.46 1.62.59.68.22 1.3.19 1.79.12.55-.08 1.65-.67 1.88-1.32.23-.65.23-1.2.16-1.32-.07-.12-.25-.19-.53-.33z"
        />
      </svg>
      <span class="font-bold text-white text-lg">Konsultasi</span>
    </a>

    <!-- FOOTER -->
    <footer
      id="Contact"
      class="bg-[#f8f6f2] border-t border-gray-200 text-black py-12 px-6"
    >
      <div class="max-w-6xl mx-auto flex flex-wrap justify-between">
        <!-- Kolom 1: Brand dan Hubungi Kami -->
        <div class="w-full md:w-1/3 mb-6 md:mb-0">
          <a class="flex items-center text-green-500 font-bold text-xl mb-2">
            <i class="fas fa-leaf mr-2"></i> FitMeals
          </a>
          <p class="text-sm text-gray-600 mb-6">
            Solusi makanan sehat, lezat, dan transparan untuk gaya hidupmu.
          </p>

          <!-- Hubungi Kami -->
          <div>
            <h2 class="font-semibold text-black mb-2">Hubungi Kami</h2>
            <div class="flex space-x-12 text-2xl">
              <a href="#"><i class="fab fa-instagram text-pink-600"></i></a>
              <a href="#"><i class="fab fa-facebook text-blue-600"></i></a>
              <a href="#"><i class="fab fa-x-twitter text-black"></i></a>
              <a href="#"><i class="fas fa-envelope text-red-500"></i></a>
            </div>
          </div>
        </div>

        <!-- Kolom 2: Navigasi -->
        <div
          class="w-full md:w-1/3 grid grid-cols-2 gap-0 text-sm text-gray-600 mb-6 md:mb-0"
        >
          <div>
            <h2 class="font-semibold text-black mb-3">Layanan</h2>
            <ul class="space-y-2">
              <li><a href="#">Menu Harian</a></li>
              <li><a href="#">Paket Diet</a></li>
              <li><a href="#">Custom Meal</a></li>
            </ul>
          </div>
          <div>
            <h2 class="font-semibold text-black mb-3">Perusahaan</h2>
            <ul class="space-y-2">
              <li><a href="#">Tentang Kami</a></li>
              <li><a href="#">Kontak</a></li>
              <li><a href="#">Kebijakan</a></li>
            </ul>
          </div>
        </div>

        <!-- Kolom 3: Alamat -->
        <div class="w-full md:w-1/3">
          <h2 class="font-semibold text-black mb-2">Alamat Kami</h2>
          <div class="rounded-lg overflow-hidden shadow">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d612.6496985829579!2d110.4066031977294!3d-7.757962510629552!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sid!2sid!4v1747282532242!5m2!1sid!2sid"
              width="100%"
              height="250"
              style="border: 0"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
            >
            </iframe>
          </div>
        </div>
      </div>

      <!-- Copyright -->
      <div class="mt-10 w-full text-center text-sm text-gray-500">
        <p>&copy; 2025 FitMeals.<br />All rights reserved.</p>
      </div>
    </footer>
  </body>
</html>
